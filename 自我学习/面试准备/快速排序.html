<script>
  // var quickSort = function (arr) {
  //   if (arr.length <= 1) return arr
  //   let left = []
  //   let right = []
  //   let len = Math.floor(arr.length / 2)
  //   let base = arr.splice(len, 1)[0]
  //   for (let i = 0; i < arr.length; i++) {
  //     if (arr[i] < base) {
  //       left.push(arr[i])
  //     }
  //     if (arr[i] >= base) {
  //       right.push(arr[i])
  //     }
  //   }
  //   return quickSort(left).concat([base], quickSort(right))
  // }

  // let nums = [2, 1, 3]
  // console.log(quickSort(nums));
</script>
<script>
  function partition(arr, i, j) {
    if (i >= j) return;
    let left = i, right = j;
    let privt = arr[left];
    while (left < right) {
      while (arr[right] >= privt && left < right) {
        right--;
      }
      arr[left] = arr[right];
      while (arr[left] <= privt && left < right) {
        left++;
      }
      arr[right] = arr[left];
    }
    arr[left] = privt;
    return left;
  }

  function quickSort(arr, i, j) {
    if (i >= j) return;
    let left = i, right = j;
    let privt = arr[left];
    while (left < right) {
      while (arr[right] >= privt && left < right) {
        right--;
      }
      arr[left] = arr[right];
      while (arr[left] <= privt && left < right) {
        left++;
      }
      arr[right] = arr[left];
    }
    arr[left] = privt;
    // left 基准位置
    // 5 4 6 8 -1 -2 4
    // [5] 4 4 -2 -1 5 8 6
    // 4 4 -2 -1 
    quickSort(arr, i, left - 1);
    quickSort(arr, left + 1, j);
  }
  let arr = [5, 4, 6, 8, -1, -2, 4]
  console.log(quickSort(arr, 0, arr.length - 1))
  console.log(arr);
</script>
<script>
  // [-9, -1, 2, 5, 8, 9]
  // p = 5;
  let arr = [0, -1, 2, 5, 8, 9, -99]
  quickSort(arr, 0, arr.length - 1);
  console.log(arr);
  function quickSort(arr, left, right) {
    if (left >= right) return;
    let p = arr[left];
    let l = left, r = right;
    while(l < r) {
      // 在 右边 < p
      while(arr[r] > p && l < r) r --;
      arr[l] = arr[r];
      // 在 左边 > p
      while(arr[l] < p && l < r) l ++;
      arr[r] = arr[l];
    }
    arr[l] = p;
    // [left, right] 数组上完整的一段区间
    // [left, ... l, ... right] 
    // debugger;
    quickSort(arr, left, l - 1);
    quickSort(arr, l + 1, right);
  }
  // console.log(quickSort([5, 9, -1, 2, -9, 8, 0]))
</script>
